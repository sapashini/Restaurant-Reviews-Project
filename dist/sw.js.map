{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/sw.js"],"names":[],"mappings":"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","file":"sw.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/*\r\n* I wil like to acknoledge the inspiration and guide I got from MWS Restaurant Reviews Project.\r\n* A Walkthrough by Alexandro Perez.Also,I adapted some of the walk through codes to make mine fully functionable.\r\n*/\r\n\r\nconst appName = \"restaurant-reviews-app\"\r\n// Create a chache variable for recycling of chaches.\r\nconst staticCacheName = appName + \"-v2.0\";\r\n\r\n// Create cache for magery.\r\nconst contentImgsCache = appName + \"-images\";\r\n\r\n// Array for the chache.\r\nvar allCaches = [\r\n  staticCacheName,\r\n  contentImgsCache\r\n];\r\n\r\n// Cache all your static assets,at Service Worker Install time.\r\nself.addEventListener('install', function(event) {\r\n  event.waitUntil(\r\n    caches.open(staticCacheName).then(function(cache) {\r\n      return cache.addAll([\r\n        '/',\r\n        '/restaurant.html',\r\n        '/css/styles.css',\r\n        '/css/styles-medium.css',\r\n        '/css/styles-large.css',\r\n        '/js/main.js',\r\n        '/js/restaurant_info.js',\r\n        '/manifest.json',\r\n        'images/icons/icon-72x72.png',\r\n        'images/icons/icon-96x96.png',\r\n        'images/icons/icon-128x128.png',\r\n        'images/icons/icon-144x144.png',\r\n        'images/icons/icon-152x152.png',\r\n        'images/icons/icon-192x192.png',\r\n        'images/icons/icon-384x384.png',\r\n        'images/icons/icon-512x512.png'\r\n      ]);\r\n    })\r\n  );\r\n});\r\n\r\n// On activate, delete any old static cache if its name changes.\r\nself.addEventListener('activate', function(event) {\r\n  event.waitUntil(\r\n    caches.keys().then(function(cacheNames) {\r\n      return Promise.all(\r\n        cacheNames.filter(function(cacheName) {\r\n          return cacheName.startsWith(appName) &&\r\n                 !allCaches.includes(cacheName);\r\n        }).map(function(cacheName) {\r\n          return caches.delete(cacheName);\r\n        })\r\n      );\r\n    })\r\n  );\r\n});\r\n\r\n// Add a fetch listener to the sw.js file to responds to cache, falling back to network.\r\nself.addEventListener('fetch', function(event) {\r\n  const requestUrl = new URL(event.request.url);\r\n\r\n  // Only highjack request made to our app.\r\n  if (requestUrl.origin === location.origin) {\r\n\r\n    // RespondWith restaurant.html if pathname startsWith '/restaurant.html'\r\n    if (requestUrl.pathname.startsWith('/restaurant.html')) {\r\n      event.respondWith(caches.match('/restaurant.html'));\r\n      return; // Done handling request, so exit early.\r\n    }\r\n\r\n    // If the request pathname starts with /img, then we need to handle images.\r\n    if (requestUrl.pathname.startsWith('/img')) {\r\n      event.respondWith(serveImage(event.request));\r\n      return; // Done handling request, so exit early.\r\n    }\r\n  }\r\n\r\n // Default behavior: respond with cached elements, if any, falling back to network.\r\nevent.respondWith(\r\n\tcaches.match(event.request).then(function(response) {\r\n\t\treturn response || fetch(event.request);\r\n    })\r\n  );\r\n});\r\n\r\nfunction serveImage(request) {\r\n  let imageStorageUrl = request.url;\r\n\r\n  // Make a new URL with a stripped suffix and extension from the request url.\r\n  imageStorageUrl = imageStorageUrl.replace(/-small\\.\\w{3}|-medium\\.\\w{3}|-large\\.\\w{3}/i, '');\r\n\r\n  return caches.open(contentImgsCache).then(function(cache) {\r\n    return cache.match(imageStorageUrl).then(function(response) {\r\n      // if image is in cache, return it, else fetch from network, cache a clone, then return network response.\r\n      return response || fetch(request).then(function(networkResponse) {\r\n        cache.put(imageStorageUrl, networkResponse.clone());\r\n        return networkResponse;\r\n      });\r\n    });\r\n  });\r\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc3cuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOzs7O0FBS0EsSUFBTSxPQUFPLEdBQUcsd0JBQWhCLEMsQ0FDQTs7QUFDQSxJQUFNLGVBQWUsR0FBRyxPQUFPLEdBQUcsT0FBbEMsQyxDQUVBOztBQUNBLElBQU0sZ0JBQWdCLEdBQUcsT0FBTyxHQUFHLFNBQW5DLEMsQ0FFQTs7QUFDQSxJQUFJLFNBQVMsR0FBRyxDQUNkLGVBRGMsRUFFZCxnQkFGYyxDQUFoQixDLENBS0E7O0FBQ0EsSUFBSSxDQUFDLGdCQUFMLENBQXNCLFNBQXRCLEVBQWlDLFVBQVMsS0FBVCxFQUFnQjtBQUMvQyxFQUFBLEtBQUssQ0FBQyxTQUFOLENBQ0UsTUFBTSxDQUFDLElBQVAsQ0FBWSxlQUFaLEVBQTZCLElBQTdCLENBQWtDLFVBQVMsS0FBVCxFQUFnQjtBQUNoRCxXQUFPLEtBQUssQ0FBQyxNQUFOLENBQWEsQ0FDbEIsR0FEa0IsRUFFbEIsa0JBRmtCLEVBR2xCLGlCQUhrQixFQUlsQix3QkFKa0IsRUFLbEIsdUJBTGtCLEVBTWxCLGFBTmtCLEVBT2xCLHdCQVBrQixFQVFsQixnQkFSa0IsRUFTbEIsNkJBVGtCLEVBVWxCLDZCQVZrQixFQVdsQiwrQkFYa0IsRUFZbEIsK0JBWmtCLEVBYWxCLCtCQWJrQixFQWNsQiwrQkFka0IsRUFlbEIsK0JBZmtCLEVBZ0JsQiwrQkFoQmtCLENBQWIsQ0FBUDtBQWtCRCxHQW5CRCxDQURGO0FBc0JELENBdkJELEUsQ0F5QkE7O0FBQ0EsSUFBSSxDQUFDLGdCQUFMLENBQXNCLFVBQXRCLEVBQWtDLFVBQVMsS0FBVCxFQUFnQjtBQUNoRCxFQUFBLEtBQUssQ0FBQyxTQUFOLENBQ0UsTUFBTSxDQUFDLElBQVAsR0FBYyxJQUFkLENBQW1CLFVBQVMsVUFBVCxFQUFxQjtBQUN0QyxXQUFPLE9BQU8sQ0FBQyxHQUFSLENBQ0wsVUFBVSxDQUFDLE1BQVgsQ0FBa0IsVUFBUyxTQUFULEVBQW9CO0FBQ3BDLGFBQU8sU0FBUyxDQUFDLFVBQVYsQ0FBcUIsT0FBckIsS0FDQSxDQUFDLFNBQVMsQ0FBQyxRQUFWLENBQW1CLFNBQW5CLENBRFI7QUFFRCxLQUhELEVBR0csR0FISCxDQUdPLFVBQVMsU0FBVCxFQUFvQjtBQUN6QixhQUFPLE1BQU0sQ0FBQyxNQUFQLENBQWMsU0FBZCxDQUFQO0FBQ0QsS0FMRCxDQURLLENBQVA7QUFRRCxHQVRELENBREY7QUFZRCxDQWJELEUsQ0FlQTs7QUFDQSxJQUFJLENBQUMsZ0JBQUwsQ0FBc0IsT0FBdEIsRUFBK0IsVUFBUyxLQUFULEVBQWdCO0FBQzdDLE1BQU0sVUFBVSxHQUFHLElBQUksR0FBSixDQUFRLEtBQUssQ0FBQyxPQUFOLENBQWMsR0FBdEIsQ0FBbkIsQ0FENkMsQ0FHN0M7O0FBQ0EsTUFBSSxVQUFVLENBQUMsTUFBWCxLQUFzQixRQUFRLENBQUMsTUFBbkMsRUFBMkM7QUFFekM7QUFDQSxRQUFJLFVBQVUsQ0FBQyxRQUFYLENBQW9CLFVBQXBCLENBQStCLGtCQUEvQixDQUFKLEVBQXdEO0FBQ3RELE1BQUEsS0FBSyxDQUFDLFdBQU4sQ0FBa0IsTUFBTSxDQUFDLEtBQVAsQ0FBYSxrQkFBYixDQUFsQjtBQUNBLGFBRnNELENBRTlDO0FBQ1QsS0FOd0MsQ0FRekM7OztBQUNBLFFBQUksVUFBVSxDQUFDLFFBQVgsQ0FBb0IsVUFBcEIsQ0FBK0IsTUFBL0IsQ0FBSixFQUE0QztBQUMxQyxNQUFBLEtBQUssQ0FBQyxXQUFOLENBQWtCLFVBQVUsQ0FBQyxLQUFLLENBQUMsT0FBUCxDQUE1QjtBQUNBLGFBRjBDLENBRWxDO0FBQ1Q7QUFDRixHQWpCNEMsQ0FtQjlDOzs7QUFDRCxFQUFBLEtBQUssQ0FBQyxXQUFOLENBQ0MsTUFBTSxDQUFDLEtBQVAsQ0FBYSxLQUFLLENBQUMsT0FBbkIsRUFBNEIsSUFBNUIsQ0FBaUMsVUFBUyxRQUFULEVBQW1CO0FBQ25ELFdBQU8sUUFBUSxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBUCxDQUF4QjtBQUNHLEdBRkosQ0FERDtBQUtDLENBekJEOztBQTJCQSxTQUFTLFVBQVQsQ0FBb0IsT0FBcEIsRUFBNkI7QUFDM0IsTUFBSSxlQUFlLEdBQUcsT0FBTyxDQUFDLEdBQTlCLENBRDJCLENBRzNCOztBQUNBLEVBQUEsZUFBZSxHQUFHLGVBQWUsQ0FBQyxPQUFoQixDQUF3Qiw2Q0FBeEIsRUFBdUUsRUFBdkUsQ0FBbEI7QUFFQSxTQUFPLE1BQU0sQ0FBQyxJQUFQLENBQVksZ0JBQVosRUFBOEIsSUFBOUIsQ0FBbUMsVUFBUyxLQUFULEVBQWdCO0FBQ3hELFdBQU8sS0FBSyxDQUFDLEtBQU4sQ0FBWSxlQUFaLEVBQTZCLElBQTdCLENBQWtDLFVBQVMsUUFBVCxFQUFtQjtBQUMxRDtBQUNBLGFBQU8sUUFBUSxJQUFJLEtBQUssQ0FBQyxPQUFELENBQUwsQ0FBZSxJQUFmLENBQW9CLFVBQVMsZUFBVCxFQUEwQjtBQUMvRCxRQUFBLEtBQUssQ0FBQyxHQUFOLENBQVUsZUFBVixFQUEyQixlQUFlLENBQUMsS0FBaEIsRUFBM0I7QUFDQSxlQUFPLGVBQVA7QUFDRCxPQUhrQixDQUFuQjtBQUlELEtBTk0sQ0FBUDtBQU9ELEdBUk0sQ0FBUDtBQVNEIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLypcclxuKiBJIHdpbCBsaWtlIHRvIGFja25vbGVkZ2UgdGhlIGluc3BpcmF0aW9uIGFuZCBndWlkZSBJIGdvdCBmcm9tIE1XUyBSZXN0YXVyYW50IFJldmlld3MgUHJvamVjdC5cclxuKiBBIFdhbGt0aHJvdWdoIGJ5IEFsZXhhbmRybyBQZXJlei5BbHNvLEkgYWRhcHRlZCBzb21lIG9mIHRoZSB3YWxrIHRocm91Z2ggY29kZXMgdG8gbWFrZSBtaW5lIGZ1bGx5IGZ1bmN0aW9uYWJsZS5cclxuKi9cclxuXHJcbmNvbnN0IGFwcE5hbWUgPSBcInJlc3RhdXJhbnQtcmV2aWV3cy1hcHBcIlxyXG4vLyBDcmVhdGUgYSBjaGFjaGUgdmFyaWFibGUgZm9yIHJlY3ljbGluZyBvZiBjaGFjaGVzLlxyXG5jb25zdCBzdGF0aWNDYWNoZU5hbWUgPSBhcHBOYW1lICsgXCItdjIuMFwiO1xyXG5cclxuLy8gQ3JlYXRlIGNhY2hlIGZvciBtYWdlcnkuXHJcbmNvbnN0IGNvbnRlbnRJbWdzQ2FjaGUgPSBhcHBOYW1lICsgXCItaW1hZ2VzXCI7XHJcblxyXG4vLyBBcnJheSBmb3IgdGhlIGNoYWNoZS5cclxudmFyIGFsbENhY2hlcyA9IFtcclxuICBzdGF0aWNDYWNoZU5hbWUsXHJcbiAgY29udGVudEltZ3NDYWNoZVxyXG5dO1xyXG5cclxuLy8gQ2FjaGUgYWxsIHlvdXIgc3RhdGljIGFzc2V0cyxhdCBTZXJ2aWNlIFdvcmtlciBJbnN0YWxsIHRpbWUuXHJcbnNlbGYuYWRkRXZlbnRMaXN0ZW5lcignaW5zdGFsbCcsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgZXZlbnQud2FpdFVudGlsKFxyXG4gICAgY2FjaGVzLm9wZW4oc3RhdGljQ2FjaGVOYW1lKS50aGVuKGZ1bmN0aW9uKGNhY2hlKSB7XHJcbiAgICAgIHJldHVybiBjYWNoZS5hZGRBbGwoW1xyXG4gICAgICAgICcvJyxcclxuICAgICAgICAnL3Jlc3RhdXJhbnQuaHRtbCcsXHJcbiAgICAgICAgJy9jc3Mvc3R5bGVzLmNzcycsXHJcbiAgICAgICAgJy9jc3Mvc3R5bGVzLW1lZGl1bS5jc3MnLFxyXG4gICAgICAgICcvY3NzL3N0eWxlcy1sYXJnZS5jc3MnLFxyXG4gICAgICAgICcvanMvbWFpbi5qcycsXHJcbiAgICAgICAgJy9qcy9yZXN0YXVyYW50X2luZm8uanMnLFxyXG4gICAgICAgICcvbWFuaWZlc3QuanNvbicsXHJcbiAgICAgICAgJ2ltYWdlcy9pY29ucy9pY29uLTcyeDcyLnBuZycsXHJcbiAgICAgICAgJ2ltYWdlcy9pY29ucy9pY29uLTk2eDk2LnBuZycsXHJcbiAgICAgICAgJ2ltYWdlcy9pY29ucy9pY29uLTEyOHgxMjgucG5nJyxcclxuICAgICAgICAnaW1hZ2VzL2ljb25zL2ljb24tMTQ0eDE0NC5wbmcnLFxyXG4gICAgICAgICdpbWFnZXMvaWNvbnMvaWNvbi0xNTJ4MTUyLnBuZycsXHJcbiAgICAgICAgJ2ltYWdlcy9pY29ucy9pY29uLTE5MngxOTIucG5nJyxcclxuICAgICAgICAnaW1hZ2VzL2ljb25zL2ljb24tMzg0eDM4NC5wbmcnLFxyXG4gICAgICAgICdpbWFnZXMvaWNvbnMvaWNvbi01MTJ4NTEyLnBuZydcclxuICAgICAgXSk7XHJcbiAgICB9KVxyXG4gICk7XHJcbn0pO1xyXG5cclxuLy8gT24gYWN0aXZhdGUsIGRlbGV0ZSBhbnkgb2xkIHN0YXRpYyBjYWNoZSBpZiBpdHMgbmFtZSBjaGFuZ2VzLlxyXG5zZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ2FjdGl2YXRlJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICBldmVudC53YWl0VW50aWwoXHJcbiAgICBjYWNoZXMua2V5cygpLnRoZW4oZnVuY3Rpb24oY2FjaGVOYW1lcykge1xyXG4gICAgICByZXR1cm4gUHJvbWlzZS5hbGwoXHJcbiAgICAgICAgY2FjaGVOYW1lcy5maWx0ZXIoZnVuY3Rpb24oY2FjaGVOYW1lKSB7XHJcbiAgICAgICAgICByZXR1cm4gY2FjaGVOYW1lLnN0YXJ0c1dpdGgoYXBwTmFtZSkgJiZcclxuICAgICAgICAgICAgICAgICAhYWxsQ2FjaGVzLmluY2x1ZGVzKGNhY2hlTmFtZSk7XHJcbiAgICAgICAgfSkubWFwKGZ1bmN0aW9uKGNhY2hlTmFtZSkge1xyXG4gICAgICAgICAgcmV0dXJuIGNhY2hlcy5kZWxldGUoY2FjaGVOYW1lKTtcclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG4gICAgfSlcclxuICApO1xyXG59KTtcclxuXHJcbi8vIEFkZCBhIGZldGNoIGxpc3RlbmVyIHRvIHRoZSBzdy5qcyBmaWxlIHRvIHJlc3BvbmRzIHRvIGNhY2hlLCBmYWxsaW5nIGJhY2sgdG8gbmV0d29yay5cclxuc2VsZi5hZGRFdmVudExpc3RlbmVyKCdmZXRjaCcsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgY29uc3QgcmVxdWVzdFVybCA9IG5ldyBVUkwoZXZlbnQucmVxdWVzdC51cmwpO1xyXG5cclxuICAvLyBPbmx5IGhpZ2hqYWNrIHJlcXVlc3QgbWFkZSB0byBvdXIgYXBwLlxyXG4gIGlmIChyZXF1ZXN0VXJsLm9yaWdpbiA9PT0gbG9jYXRpb24ub3JpZ2luKSB7XHJcblxyXG4gICAgLy8gUmVzcG9uZFdpdGggcmVzdGF1cmFudC5odG1sIGlmIHBhdGhuYW1lIHN0YXJ0c1dpdGggJy9yZXN0YXVyYW50Lmh0bWwnXHJcbiAgICBpZiAocmVxdWVzdFVybC5wYXRobmFtZS5zdGFydHNXaXRoKCcvcmVzdGF1cmFudC5odG1sJykpIHtcclxuICAgICAgZXZlbnQucmVzcG9uZFdpdGgoY2FjaGVzLm1hdGNoKCcvcmVzdGF1cmFudC5odG1sJykpO1xyXG4gICAgICByZXR1cm47IC8vIERvbmUgaGFuZGxpbmcgcmVxdWVzdCwgc28gZXhpdCBlYXJseS5cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiB0aGUgcmVxdWVzdCBwYXRobmFtZSBzdGFydHMgd2l0aCAvaW1nLCB0aGVuIHdlIG5lZWQgdG8gaGFuZGxlIGltYWdlcy5cclxuICAgIGlmIChyZXF1ZXN0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9pbWcnKSkge1xyXG4gICAgICBldmVudC5yZXNwb25kV2l0aChzZXJ2ZUltYWdlKGV2ZW50LnJlcXVlc3QpKTtcclxuICAgICAgcmV0dXJuOyAvLyBEb25lIGhhbmRsaW5nIHJlcXVlc3QsIHNvIGV4aXQgZWFybHkuXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuIC8vIERlZmF1bHQgYmVoYXZpb3I6IHJlc3BvbmQgd2l0aCBjYWNoZWQgZWxlbWVudHMsIGlmIGFueSwgZmFsbGluZyBiYWNrIHRvIG5ldHdvcmsuXHJcbmV2ZW50LnJlc3BvbmRXaXRoKFxyXG5cdGNhY2hlcy5tYXRjaChldmVudC5yZXF1ZXN0KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcblx0XHRyZXR1cm4gcmVzcG9uc2UgfHwgZmV0Y2goZXZlbnQucmVxdWVzdCk7XHJcbiAgICB9KVxyXG4gICk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gc2VydmVJbWFnZShyZXF1ZXN0KSB7XHJcbiAgbGV0IGltYWdlU3RvcmFnZVVybCA9IHJlcXVlc3QudXJsO1xyXG5cclxuICAvLyBNYWtlIGEgbmV3IFVSTCB3aXRoIGEgc3RyaXBwZWQgc3VmZml4IGFuZCBleHRlbnNpb24gZnJvbSB0aGUgcmVxdWVzdCB1cmwuXHJcbiAgaW1hZ2VTdG9yYWdlVXJsID0gaW1hZ2VTdG9yYWdlVXJsLnJlcGxhY2UoLy1zbWFsbFxcLlxcd3szfXwtbWVkaXVtXFwuXFx3ezN9fC1sYXJnZVxcLlxcd3szfS9pLCAnJyk7XHJcblxyXG4gIHJldHVybiBjYWNoZXMub3Blbihjb250ZW50SW1nc0NhY2hlKS50aGVuKGZ1bmN0aW9uKGNhY2hlKSB7XHJcbiAgICByZXR1cm4gY2FjaGUubWF0Y2goaW1hZ2VTdG9yYWdlVXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgIC8vIGlmIGltYWdlIGlzIGluIGNhY2hlLCByZXR1cm4gaXQsIGVsc2UgZmV0Y2ggZnJvbSBuZXR3b3JrLCBjYWNoZSBhIGNsb25lLCB0aGVuIHJldHVybiBuZXR3b3JrIHJlc3BvbnNlLlxyXG4gICAgICByZXR1cm4gcmVzcG9uc2UgfHwgZmV0Y2gocmVxdWVzdCkudGhlbihmdW5jdGlvbihuZXR3b3JrUmVzcG9uc2UpIHtcclxuICAgICAgICBjYWNoZS5wdXQoaW1hZ2VTdG9yYWdlVXJsLCBuZXR3b3JrUmVzcG9uc2UuY2xvbmUoKSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldHdvcmtSZXNwb25zZTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSJdfQ=="}